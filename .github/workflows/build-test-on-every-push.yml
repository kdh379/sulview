name: "build-test-on-every-push"

on: push

jobs:
  setup-env:
    uses: ./.github/workflows/setup-env.yml

  build:
    needs: setup-env
    name: build test
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Project
      uses: ./.github/actions/setup-project

    - name: Download .env file
      uses: actions/download-artifact@v3
      with:
        name: env-file

    - name: Build Test
      run: pnpm build
      if: ${{ always() }}